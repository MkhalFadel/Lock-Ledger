generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id        Int      @id @default(autoincrement())
  username  String   @unique
  email     String   @unique
  password  String?
  image_url String?
  pin       Int?
  ledger    ledger[]
  notes     notes[]

  @@map("users")
}

model ledger {
  id      Int         @id @default(autoincrement())
  user_id Int
  title   String      @db.VarChar(255)
  date    DateTime    @db.Date
  type    ledger_type
  amount  Decimal?    @db.Decimal(10, 2)
  users   User        @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "ledger_ibfk_1")

  @@index([user_id], map: "user_id")
}

model notes {
  id          Int       @id @default(autoincrement())
  user_id     Int
  title       String    @db.VarChar(255)
  content     String?   @db.Text
  is_favorite Boolean   @default(false)
  is_deleted  Boolean   @default(false)
  last_edit   DateTime  @default(now()) @db.DateTime(0)
  created_at  DateTime? @default(dbgenerated("(curdate())")) @db.Date
  users       User      @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "notes_ibfk_1")

  @@index([user_id], map: "user_id")
}

enum ledger_type {
  Income
  Expenses
}
